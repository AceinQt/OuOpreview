const appVersion = "Q.1.0"; // Current app version
            const updateLog = [
                {
                    version: "Q.1.0",
                    date: "2026-02-23",
                    notes: [
                        "ã€èŠå¤©ä¼˜åŒ–ã€‘1.æ–°å¢çº¿ä¸‹æ¨¡å¼ï¼ˆä»…é™ç§èŠï¼‰åŠå…¨å±€æœç´¢åŠŸèƒ½ã€‚",
                        "2.Useräººè®¾ç°æ”¹ä¸ºå…¨å±€ç»‘å®šæ¨¡å¼ï¼Œéœ€å…ˆå‰å¾€â€œæˆ‘â€é¡µé¢æ–°å¢å’Œä¿®æ”¹äººè®¾ï¼Œå…¶ä»–æ‰€æœ‰æ¶‰åŠè¯»å–Useräººè®¾çš„åŠŸèƒ½å°†ç»Ÿä¸€é‡‡ç”¨æ­¤æ¨¡å¼ã€‚",
                        "3.åœ¨ç¾¤èŠä¸­ä¿®æ”¹æ˜µç§°æ—¶ï¼Œç°ä¼šè§¦å‘ç³»ç»Ÿæ¶ˆæ¯æ¨é€æç¤ºã€‚",
                        "ã€ä¸–ç•Œä¹¦ã€‘æ–°å¢â€œå†™ä½œâ€åˆ†ç±»ã€‚è¯¥åˆ†ç±»ä¸ä¼šä½œç”¨äºçº¿ä¸ŠèŠå¤©ï¼Œä¸“ç”¨äºçº¿ä¸‹æ¨¡å¼ã€è®°å¿†æ¡£æ¡ˆã€è®ºå›ç­‰æ¶‰åŠé•¿æ–‡å­—æ®µè½çš„åœºæ™¯ã€‚æ³¨æ„ï¼šâ€œå†™ä½œâ€åˆ†ç±»åœ¨çº¿ä¸‹æ¨¡å¼çš„æç¤ºè¯å±‚çº§éå¸¸é åï¼Œå¯¹ç”Ÿæˆç»“æœçš„å½±å“åŠ›æ˜¾è‘—é«˜äºâ€œä¸–ç•Œä¹¦ï¼ˆåï¼‰â€ã€‚",
                        "ã€è®°å¿†æ¡£æ¡ˆã€‘åŸâ€œæ—¥è®°â€åŠŸèƒ½ä¿®æ”¹ä¸ºâ€œè®°å¿†æ¡£æ¡ˆâ€ã€‚",
                        "1.æ–°å¢â€œçŸ­æœŸæ€»ç»“â€ä¸â€œé•¿æœŸæ€»ç»“â€ã€‚è§’è‰²æ—¥è®°ä¸å†ç›´æ¥åŠ å…¥èŠå¤©è®°å¿†ï¼Œæ›¿æ¢ä¸ºæ€»ç»“å†…å®¹ä¸ºè§’è‰²æä¾›é•¿æ—¶è®°å¿†ã€‚",
                        "2.æ—¥è®°ä¸æ€»ç»“å¯åˆ†åˆ«å…³è”ä¸åŒçš„ä¸–ç•Œä¹¦ï¼Œè¯·å‰å¾€ç•Œé¢é‡æ–°è®¾ç½®å…³è”ã€‚",
                        "3.æ”¯æŒâ€œçŸ­æœŸæ€»ç»“â€ä¸â€œæ—¥è®°â€ä¸€é”®åŒæ­¥ç”Ÿæˆï¼ˆæ³¨æ„ï¼šæ­¤æ“ä½œéœ€è°ƒç”¨ä¸¤æ¬¡APIï¼Œè€—æ—¶è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼‰ã€‚",
                        "ã€è®ºå›ã€‘1.å¢åŠ å‘å¸–ä¸è¯„è®ºåŠŸèƒ½ï¼Œå¹¶æ”¯æŒåŒ¿åäº’åŠ¨ã€‚åŒ¿åé»˜è®¤ç”¨æˆ·åä¸ºâ€œå–µå½+å››ä½æ•°å­—â€ï¼ˆæ•°å­—å¯åœ¨â€œæˆ‘â€ç•Œé¢è‡ªå®šä¹‰ä¿®æ”¹ï¼Œæ–¹ä¾¿å¤§å®¶ç²¾åˆ†æ‰®æ¼”ä¸åŒäººè®¾è°ƒæˆè§’è‰²ï¼‰ã€‚",
                        "2.å‘å¸–æ”¯æŒå…³è”è§’è‰²èŠå¤©è®°å½•ï¼Œå¯è‡ªå®šä¹‰å…³è”æ¡æ•°ï¼ˆå»ºè®®é€‚é‡ï¼Œå…³è”è¿‡å¤šå¯èƒ½å½±å“ç”Ÿæˆé€Ÿåº¦ï¼‰ã€‚",
                        "3.æ–°å¢ã€æ”¶è—ã€‘ä¸ã€åœ¨çœ‹ã€‘åŠŸèƒ½ï¼Œç»Ÿä¸€åœ¨åº•æ â€œæ”¶è—â€é¡µç®¡ç†ã€‚ã€æ”¶è—ã€‘ä¸ºç§å¯†ä»…è‡ªå·±å¯è§ï¼›ç‚¹äº®ã€åœ¨çœ‹ã€‘åˆ™è§’è‰²å¯è§ã€‚æé†’ï¼šä¸è§’è‰²è®¨è®ºå®Œæ¯•åè®°å¾—å–æ¶ˆã€åœ¨çœ‹ã€‘ï¼Œå¦åˆ™åœ¨ä½ å’Œå…¶ä»–è§’è‰²èŠå¤©æ—¶ï¼Œå®¹æ˜“è¢«æ„å¤–ç¿»æ—§è´¦å“¦ã€‚",
                        "ğŸ’¡ è®ºå›å°è´´å£«ï¼šå»ºè®®åœ¨ä¸–ç•Œä¹¦æˆ–è§’è‰²äººè®¾ä¸­æ˜ç¡®å†™æ˜â€œè¯¥è§’è‰²ç½‘åæ˜¯xxxâ€ï¼Œä»¥å›ºå®šè§’è‰²æˆ–NPCçš„å›å¸–ç”¨æˆ·åã€‚",
                        "ã€æ¸¸æˆã€‘æ–°å¢ä»¿RPGæ¸¸æˆäº’åŠ¨åŠŸèƒ½ï¼Œå¸¦æ¥æ›´ä¸°å¯Œçš„æ²‰æµ¸å¼ä½“éªŒã€‚",
                        "ã€ä¸»é¡µã€‘æŠŠä¸€äº›åŠŸèƒ½éƒ½æ•´åˆåˆ°äº†åº•éƒ¨â€œè®¾ç½®â€ä¸­ã€‚",
                        "ã€å…¶ä»–ã€‘è¿›è¡Œäº†å¤§é‡é›¶æ•£ç»†èŠ‚çš„ä¿®æ”¹ï¼Œå› ä¸ºæ¯”è¾ƒé›¶ç¢å°±ä¸åœ¨æ—¥å¿—é‡Œå†™äº†_(:Ğ·ã€âˆ )_"
                    ]
                },
                {
                    version: "1.3.0",
                    date: "2025-11-11",
                    notes: [
                        "åŠ¡å¿…ä»”ç»†è§‚çœ‹ï¼é‡å¤è§‚çœ‹æŒ‡è·¯â†’ä¸»å±å¹•çš„æ•™ç¨‹appâ†’æ›´æ–°è¯´æ˜ï¼",
                        "æ–°å¢ï¼šåŒè¯­æ¨¡å¼ï¼Œä½äºèŠå¤©ç•Œé¢çš„ä¾§è¾¹æ å†…ï¼Œå½“charä¸ºå¤–å›½äººè€Œä½ æƒ³è¦æ›´æ²‰æµ¸å¼çš„å¯¹è¯æ—¶ï¼Œå¯æŒ‰éœ€å¼€å¯ï¼Œå¼€å¯åä¼šå°†â€œå¤–æ–‡ï¼ˆä¸­æ–‡ï¼‰â€çš„æ¶ˆæ¯è¯†åˆ«æˆåŒè¯­æ¶ˆæ¯æ°”æ³¡ï¼Œæ³¨æ„ï¼ä¸­æ–‡ç¿»è¯‘å¿…é¡»åœ¨æ‹¬å·å†…ï¼Œç‚¹å‡»æ°”æ³¡åå±•å¼€ç¿»è¯‘ã€‚",
                        "â†‘è¡¥å……ï¼šå¦‚æœæ‰æ ¼å¼å¦‚ä½•ä¿®æ”¹ï¼Ÿç¼–è¾‘çª—å£å°†ç¿»è¯‘æ‹¬å·å†…çš„å…¶ä»–æ‹¬å·åˆ æ‰ï¼Œæ¯”å¦‚å¸¦æ‹¬å·çš„é¢œæ–‡å­—ã€(ç¬‘)ç­‰ã€‚å¦‚æœè¿˜æœ‰bugå°±å…ˆåˆ«å¼€è¿™ä¸ªå§ï¼",
                        "æ–°å¢ï¼šæµå¼ä¼ è¾“å¼€å…³ï¼Œä½äºapiè®¾ç½®ç•Œé¢ï¼Œå¼€è·Ÿä¸å¼€ä¸çŸ¥é“æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ€»ä¹‹åšäº†å—¯å—¯ã€‚æ²¡æ”¹ä¹‹å‰é»˜è®¤æ˜¯æµå¼ä¼ è¾“ï¼Œå¦‚æœéæµå‡ºä¸æ¥å°±å¼€æµå¼ï¼Œæµå¼å‡ºä¸æ¥å°±å…³æµå¼ï¼Œéƒ½å‡ºä¸æ¥æˆ‘ä¹Ÿæ²¡æ‹›äº†ï¼",
                        "æ–°å¢ï¼šæ‹“å±•cssç¾åŒ–ä»£ç ï¼ŒæŒ‡è·¯â†’ä¸»å±å¹•çš„è‡ªå®šä¹‰appâ†’å…¨å±€ç¾åŒ–cssä¸­ï¼Œä¸‹æ»‘ã€‚æœ‰éšè—å¤´åƒã€åº•éƒ¨å˜ç®€æ´ã€éšè—è¡¨æƒ…åŒ…èƒŒæ™¯ä¹‹ç±»çš„ï¼Œå¯è‡ªè¡Œå¤åˆ¶éœ€è¦çš„éƒ¨åˆ†æ”¾åˆ°å…¨å±€ç¾åŒ–ä¸­ã€‚",
                        "è¡¥å……æ•™å­¦ï¼šå‘ç°æœ‰äº›å®å®è¿˜æœ‰åœ°æ–¹ä¸å¤ªæ¸…æ¥šæ€ä¹ˆä½¿ç”¨ï¼Œè¡¥å……ä¸€ä¸‹",
                        "1. å·çœ‹æ‰‹æœºï¼šå­˜å‚¨ä¸ºä¸´æ—¶å­˜å‚¨ï¼Œç¦»å¼€charæ‰‹æœºé¡µé¢åï¼Œå·çœ‹çš„ç›¸å…³å†…å®¹å°†ä¼šæ¸…ç©ºï¼Œæœ‰å–œæ¬¢çš„å†…å®¹è¯·åŠæ—¶æˆªå›¾",
                        "2. å›å¿†æ—¥è®°ï¼šç”Ÿæˆæ—¥è®°åï¼Œéœ€ç‚¹äº®è¯¥ç¯‡æ—¥è®°å³ä¸Šè§’çš„â˜†æŒ‰é’®æ”¶è—ï¼Œæ”¶è—åè¯¥ç¯‡æ—¥è®°æ‰ä¼šä½œä¸ºcharçš„å›å¿†åŠ å…¥èŠå¤©ä¸Šä¸‹æ–‡ä¸­",
                        "3. æ—¥è®°ä½¿ç”¨æ‹“å±•æ–¹æ³•ï¼šæ—¥è®°å†…å®¹å¯ç¼–è¾‘ï¼Œå½“æ—¥è®°ç¯‡æ•°è¿‡å¤š/charè¢«æ—¥è®°å†…çš„ä¸»è§‚å½¢å®¹å½±å“æ€§æ ¼è¾ƒå¤§æ—¶ï¼Œå¯ä»¥å°†ä½ éœ€è¦ä¿ç•™çš„æ—¥è®°å†…å®¹å¤åˆ¶ç»™æŸä¸ªaiï¼ˆè±†åŒ…ã€deepseekã€å“ˆå‰ç±³éƒ½è¡Œï¼‰è¿›è¡Œå¤§æ€»ç»“ï¼ŒæŒ‡ä»¤å‚è€ƒï¼šä»¥å…¨å®¢è§‚çš„ã€ä¸å‚æ‚ä»»ä½•ä¸»è§‚æƒ…ç»ªï¼Œä»¥ç¬¬ä¸‰äººç§°è§†è§’æŒ‰ç…§æ—¶é—´é¡ºåºæ€»ç»“å‘ç”Ÿè¿‡çš„äº‹ä»¶å’Œå…³é”®è¯­å¥ã€‚ç„¶åå°†è¿”å›çš„æ€»ç»“å¡è¿›æ—¥è®°æ”¶è—åŠ å…¥ä¸Šä¸‹æ–‡å³å¯ã€‚",
                    ]
                },
                {
                    version: "1.2.0",
                    date: "2025-10-15",
                    notes: [
                        "æ–°å¢ï¼šçŒ«ç®±å›¾åºŠ (Catbox) æ¸²æŸ“æœºåˆ¶ï¼Œåœ¨å½“å‰ç»‘å®šçš„è¡¨æƒ…åŒ…ä¸–ç•Œä¹¦ä¸­åŒ…å« 'catbox' å…³é”®è¯å³å¯åˆ‡æ¢åˆ°çŒ«ç®±æ¨¡å¼ï¼Œæ³¨æ„ï¼ipostingå›¾åºŠè¡¨æƒ…åŒ…å’ŒçŒ«ç®±è¡¨æƒ…åŒ…ä¸å¯åŒæ—¶æ¸²æŸ“ï¼Œåªèƒ½é€‰æ‹©ä¸€æ–¹ã€‚å¦‚ï¼šç»‘å®šäº†çŒ«ç®±è¡¨æƒ…åŒ…ä¸–ç•Œä¹¦ï¼Œå°±æ— æ³•æ¸²æŸ“è¿‡å¾€ipostingå›¾åºŠçš„è¡¨æƒ…åŒ…ï¼Œä¸ç»‘å®šåˆ™åä¹‹ã€‚",
                        "æ–°å¢ï¼šä¸–ç•Œä¹¦æ‰¹é‡åˆ é™¤åŠŸèƒ½ï¼Œé•¿æŒ‰æ¡ç›®å³å¯è¿›å…¥å¤šé€‰åˆ é™¤æ¨¡å¼ï¼Œæ”¯æŒåˆ†ç±»å…¨é€‰ã€‚",
                    ]
                },
                {
                    version: "1.1.0",
                    date: "2025-10-13",
                    notes: [
                        "é‡è¦ï¼ï¼å·²æ›´æ¢å­˜å‚¨æ–¹å¼ï¼Œè¯·å°½å¿«å¯¼å‡ºåŸç½‘å€çš„å¤‡ä»½å¹¶æ¸…ç†æµè§ˆå™¨å†…è¯¥ç½‘å€çš„æ•°æ®ï¼Œå¹¶é‡æ–°åœ¨æ­¤ç½‘å€å¯¼å…¥å¤‡ä»½",
                        "æ–°å¢ï¼šç•ªèŒ„é’Ÿï¼Œå¯ä»¥åˆ›å»ºä¸“æ³¨ä»»åŠ¡å¹¶ç»‘å®šcharå’Œè‡ªå·±çš„äººè®¾é¢„è®¾ï¼ˆä»…å¯ä»é¢„è®¾ä¸­é€‰æ‹©ï¼‰ï¼Œåœ¨åˆ—è¡¨ä¸­å·¦æ»‘åˆ é™¤ä»»åŠ¡ã€‚ä¸“æ³¨æœŸé—´æƒ³æ‘¸é±¼äº†å¯ä»¥æˆ³ä¸€æˆ³å¤´åƒï¼Œtaä¼šå¯¹ä½ åšå‡ºå›å¤ã€‚æ¯ä¸ªä¸“æ³¨ç•Œé¢çš„è®¾ç½®é”®å¯ä»¥è‡ªå®šä¹‰é¼“åŠ±é¢‘ç‡å’Œé™åˆ¶è‡ªå·±æˆ³ä¸€æˆ³çš„æ¬¡æ•°ï¼Œè¶…è¿‡æ¬¡æ•°åˆ™taä¸ä¼šå†ç†ä½ ï¼Œè¯·è¡¥è¯å·æ‡’ï¼ŒåŠªåŠ›ä¸“æ³¨å§ï¼",
                        "æ–°å¢ï¼šä¸¤ä¸ªæ¡Œé¢å°ç»„ä»¶ï¼Œç°æ‰€æœ‰å°ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ç‚¹å‡»æ¥è‡ªå®šä¹‰å›¾ç‰‡å’Œæ–‡å­—",
                        "ä¼˜åŒ–ï¼šä¿®å¤äº†å­˜å‚¨è†¨èƒ€çš„é—®é¢˜ï¼Œç°ä¸ºæµ‹è¯•é˜¶æ®µä¸ç¡®å®šæ˜¯å¦æœ‰bugï¼Œè¯·å‹¤å¤‡ä»½ï¼å”¯æœ‰å¤‡ä»½æ‰æ˜¯å®‰å…¨çš„ï¼",
                        "ä¼˜åŒ–ï¼šä¿®å¤äº†ä¸€äº›ä½¿ç”¨ä½“éªŒä¸Šçš„å°é—®é¢˜",
                        "ç”»é¥¼ï¼ˆæœªæ¥å¯èƒ½ä¼šåšçš„ï¼‰ï¼š1.ç¬¬äºŒé¡µçš„å¸ƒå±€ç¾åŒ– 2.æ—¥è®°æœ¬ã€å­˜é’±ç½ã€éŸ³ä¹",
                    ]
                }
            ];
              
                                          // --- NEW: Update Log Functions ---
                function renderUpdateLog() {
                    const tutorialContent = document.getElementById('tutorial-content-area');
                    if (!tutorialContent) return;

                    const updateSection = document.createElement('div');
                    updateSection.className = 'tutorial-item'; // Use tutorial-item class, default open

                    let notesHtml = '';
                    updateLog.forEach((log, index) => {
                        notesHtml += `
                        <div style="margin-bottom: 15px; ${index < updateLog.length - 1 ? 'padding-bottom: 10px; border-bottom: 1px solid #f0f0f0;' : ''}">
                            <h4 style="font-size: 15px; color: #333; margin: 0 0 5px 0;">ç‰ˆæœ¬ ${log.version} (${log.date})</h4>
                            <ul style="padding-left: 20px; margin: 0; list-style-type: 'â€º ';">
                                ${log.notes.map(note => `<li style="margin-bottom: 5px; color: #666;">${note}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                    });

                    updateSection.innerHTML = `
                    <div class="tutorial-header">æ›´æ–°æ—¥å¿—</div>
                    <div class="tutorial-content" style="padding-top: 15px;">
                        ${notesHtml}
                    </div>
                `;

                    tutorialContent.appendChild(updateSection);
                }

                function showUpdateModal() {
                    const modal = document.getElementById('update-log-modal');
                    const contentEl = document.getElementById('update-log-modal-content');
                    const closeBtn = document.getElementById('close-update-log-modal');

                    const latestLog = updateLog[0];
                    if (!latestLog) return;

                    contentEl.innerHTML = `
                    <h4>ç‰ˆæœ¬ ${latestLog.version} (${latestLog.date})</h4>
                    <ul>
                        ${latestLog.notes.map(note => `<li>${note}</li>`).join('')}
                    </ul>
                    <p style="font-size: 12px; color: #888; text-align: center; margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px;">è¿‡å¾€æ›´æ–°è¯´æ˜å¯åœ¨â€œæ•™ç¨‹â€åº”ç”¨å†…æŸ¥çœ‹ã€‚</p>
                `;

                    modal.classList.add('visible');

                    closeBtn.onclick = () => {
                        modal.classList.remove('visible');
                        localStorage.setItem('lastSeenVersion', appVersion);
                    };
                }

                function checkForUpdates() {
                    const lastSeenVersion = localStorage.getItem('lastSeenVersion');
                    if (lastSeenVersion !== appVersion) {
                        // Use a small delay to ensure the main UI has rendered
                        setTimeout(showUpdateModal, 500);
                    }
                }
                
  let loadingBtn = false;